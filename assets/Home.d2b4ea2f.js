import{r as x,w as v,o as w,a as k,b as s,c as b,d as j,T as E,e as o,f as g,u as r,g as a,t as c,F as m,h,s as T,i as C,j as f,k as A,n as I}from"./index.9454718d.js";const S={key:0,class:"flex h-[50vh] items-center justify-center"},B={key:1,class:"h-[50vh] flex flex-col items-center justify-center text-white"},R=a("h6",{class:"sm:text-xl font-medium mt-2 mb-4"},"An error occurred",-1),N={key:2},P={class:"text-2xl font-medium text-white mb-4"},z={class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 place-items-center gap-4"},F=["onClick"],G={class:"text-sm sm:text-base w-full p-3 backdrop-blur backdrop-brightness-50"},V={__name:"Home",props:{openedAnimeId:{type:String,default:null}},emits:{"update:openedAnimeId":i=>typeof i=="string"},setup(i){const y=i,e=x({loading:!0,loadingError:null,search:"",categories:{}}),d=()=>{if(T("localStorage")){const t=localStorage.getItem("progress");t&&(e.categories["Continue Watching"]=Object.values(JSON.parse(t)))}};v(()=>y.openedAnimeId,t=>{t||d()});const _=async()=>{e.loading=!0,e.loadingError=null;try{d();const t=await fetch("https://api.consumet.org/meta/anilist/trending?perPage=10",{method:"GET",headers:{"Content-Type":"application/json"}}),p=await fetch("https://api.consumet.org/meta/anilist/popular?perPage=10",{method:"GET",headers:{"Content-Type":"application/json"}}),l=await fetch("https://api.consumet.org/meta/anilist/recent-episodes?perPage=10",{method:"GET",headers:{"Content-Type":"application/json"}});e.categories.Trending=(await t.json()).results,e.categories.Popular=(await p.json()).results,e.categories["Recently Released"]=(await l.json()).results}catch(t){console.log(t),e.loadingError=t}finally{e.loading=!1}};return w(()=>_(k)),(t,p)=>(s(),b(E,{"enter-active-class":"duration-300 ease-out","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"duration-200 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0",mode:"out-in"},{default:j(()=>[e.loading?(s(),o("div",S,[g(r(f),{icon:r(C),size:"2xl",class:"text-red-600 animate-spin"},null,8,["icon"])])):e.loadingError?(s(),o("div",B,[g(r(f),{icon:r(A),size:"2xl",class:"text-red-600"},null,8,["icon"]),R,a("code",null,c(e.loadingError),1)])):(s(),o("div",N,[(s(!0),o(m,null,h(e.categories,(l,u)=>(s(),o("article",{key:u,class:"mb-12"},[a("h4",P,c(u),1),a("section",z,[(s(!0),o(m,null,h(l,n=>(s(),o("figure",{key:n.id,onClick:$=>t.$emit("update:openedAnimeId",n.id),class:"h-60 sm:h-80 w-full cursor-pointer rounded-2xl overflow-hidden text-white hover:ring-4 hover:ring-neutral-600 bg-cover flex items-end",style:I({backgroundImage:`url(${n.image})`})},[a("div",G,c(n.title.romaji),1)],12,F))),128))])]))),128))]))]),_:1}))}};export{V as default};
